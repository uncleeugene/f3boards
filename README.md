# f3boards
Моя работа, вот уже некоторое время связана с авиасимуляторами. Я катаю людей на авиатренажёре, обслуживаю один тренажёр, и пилю ещё один. И вот для этого "ещё одного", в качестве основной железной составляющей используется система контроллеров F3 за авторством человека, известного на профильном форуме как kreml. Система у него отличная, работает стабильно, очень гибко конфигурируется и очень много позволяет. Для тех, кто не знаком - вот документация, а вот форум с описанием, обсуждением, и, собственно, автором.

Для той кабины, которую я собираю, мне потребовалось внести кое-какие изменения в железо. В основном всё, что я делаю - косметика, чтобы убрать провода и сделать конструкцию кабины чуть более модульной. Мне это понадобится, потому что собирается она не там, где будет работать, её придётся разбирать и возить. И чем более готовыми будут отдельные блоки, тем проще будет сборка и запуск на месте.
# F3 Hub

Плата разветвления питания и сигнала для контроллеров F3. Содержит шесть клеммников для раздачи питания, три параллельных комплекта клеммников для линий RS485 и два разъёма RJ45. На розетки RJ45 выведены линии RS485 и линии питания. Плюс питания подключается к разъёмам RJ45 через джампер, так что питание можно подключать-отключать в зависимости от требований конфигурации.

Для желающих изготовить самостоятельно, вот герберы.
# uIN2

Входной интерфейс. До 256 каналов цифровых входов. Функционально аналогична оригинальному устройству от kreml. Самое большое изменение - использование розеток RJ45 для порта RS485. Розетки соединены параллельно, и позволяют соединять устройства в цепочку, используя обычные патчкорды. Контакты 3-6 розеток используются как сигнальные:
3 - MT+
4 - MT-
5 - MR+
6 - MR-

а оставшиеся могут быть использованы для подачи питания:
1-2 - VCC
7-8 - GND

Отсюда следует следующее важное изменение - возможность конфигурировать питание. На плате, так же как и у оригинала, разведён стабилизатор LM2931, но предусмотрена возможность его обхода, а так же возможность выбора источника питания, RJ45 или клеммник PWR. За конфигурацию питания отвечают пины под обозначением PSEL:

Распиновка этого блока следующая:

    Плюс питания от RJ45
    Плюс питания платы
    Вход стабилизатора
    Выход стабилизатора
    Плюс питания с клеммника
    Плюс питания платы 

Используя пару джамперов, можно сконфигурировать питание платы с использованием стабилизатора и без, с любым из источников питания, и, при необходимости, организовать проброс питания с одного разъёма на другой.

Ещё одно небольшое изменение - разъём программатора. На плате разведён стандартный шестипиновый AVR ISP, с ножкой RESET на своём месте. Это упрощает прошивку контроллера сторонними программаторами с обычным шлейфом IDC. Для совместимости с оригинальным способом прошивки, вывод RESET также вынесен на отдельный пин рядом с разъёмом.

В остальном, плата является копией оригинального устройства от kreml, и полностью соответствует документации. Герберы, для самостоятельного изготовления.
# Out256, MAX7219

Плата вывода для семисегментных индикаторов. На борту содержит контроллер Out_256 и четыре микросхемы MAX7219. Выводы микросхем распределены таким образом, что к плате можно подключить два трёхзначных индикатора, два пятизначных и до восьми четырёхзначных. Этого комплекта достаточно, чтобы на одной плате реализовать вывод цифровой индикации MCP B737 (курсы на четырёхзначные выводы) или FCU A320, и ещё останутся выводы для индикаторов клавиш. В то же время, применение платы никак не ограничивается этими панелями, она полностью конфигурируемая. Изменения в ней те же, что и в предыдущей: разъёмы RJ45, селектор питания и стандартный разъём ISP. Герберы тут.

Все платы собраны в железе и проверены в работе. Платы на фотографиях - прототипы, на них нет селекторов питания. В герберах свежие версии.
